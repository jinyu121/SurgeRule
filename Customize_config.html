<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Surge Customize</title>
<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.bootcss.com/bootstrap-switch/3.3.2/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet"/>
<style>
    body{
        margin-bottom:50px;
    }
</style>
</head>
<body>
<div class="jumbotron">
	<div class="container">
		<h1>å®šåˆ¶å¹¶ä¸‹è½½ Surge è§„åˆ™</h1>
		<p>
			é€šè¿‡è‡ªå®šä¹‰èŠ‚ç‚¹ä¿¡æ¯å¹¶æŒ‰éœ€æŒ‘é€‰è§„åˆ™ï¼Œå®šåˆ¶ä¸€ä»½å±äºä½ è‡ªå·±çš„ Surge è§„åˆ™å§ã€‚
		</p>
	</div>
</div>
<div class="container">
    <ul id="main_tab" class="nav nav-tabs nav-justified" role="tablist">
        <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">å®šåˆ¶è§„åˆ™</a></li>
        <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">è§£æå®šåˆ¶ä»£ç </a></li>
    </ul>
	<div class="row">
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="home">
                <div class="col-sm-12">
        			<form>
        				<div class="section">
        					<h1 class="page-header"><span class="glyphicon glyphicon-tasks"></span> èŠ‚ç‚¹ä¿¡æ¯</h1>
        					<div class="row">
        						<div class="col-sm-12">
        							<div class="form-group">
        								<textarea id="node_info" class="form-control" rows="5"></textarea>
        								<span class="help-block">å¡«å…¥ä½ çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚åŒ…æ‹¬<code>[Proxy]</code>å’Œ<code>[Proxy Group]</code>æ®µã€‚<a href="#" class="btn btn-danger btn-xs" data-toggle="modal" data-target="#node_info_example_model">æŸ¥çœ‹ç¤ºä¾‹</a></span>
        							</div>
        						</div>
        					</div>
        				</div>
        				<div class="section">
        					<h1 class="page-header"><span class="glyphicon glyphicon-cog"></span> è§„åˆ™é€‰å–</h1>
        					<div class="alert alert-danger alert-dismissible fade in" role="alert">
        						<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        						<p>
        							<b>è¯·æ…ç”¨å„ç§æ¿€è¿›è§„åˆ™ï¼</b>æ¿€è¿›è§„åˆ™æ€ä¼¤åŠ›è¾ƒå¤§ï¼Œå¯èƒ½å¯¼è‡´è®¸å¤šä¸å¯é¢„æ–™çš„äº‹æƒ…å‘ç”Ÿã€‚è¯·ä¸‰æ€åè°¨æ…é€‰ç”¨ã€‚
        						</p>
        					</div>
        					<h2>åŸºäºåŸŸåçš„è§„åˆ™</h2>
        					<h3>å¢å¼ºè§„åˆ™</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-big_company"/> å¤§å…¬å¸</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-blog"/> åšå®¢</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-cdn"/> å…¬å…±CDN</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-design"/> è®¾è®¡ç‹®</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-developer"/> ç¨‹åºçŒ¿</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-download"/> ä¸‹è½½ç«™ï¼ŒBTä¸‹è½½</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-education"/> æ•™è‚²æœºæ„</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-government"/> æ”¿åºœæœºæ„</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-images"/> å›¾åºŠå’Œå›¾ç‰‡åˆ†äº«</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-music"/> éŸ³ä¹å’Œæ’­å®¢</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-net_disk"/> ç½‘ç›˜ã€äº‘å­˜å‚¨ã€æ–‡ä»¶åˆ†äº«</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-network"/> ç½‘ç»œæœåŠ¡</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-news"/> æ–°é—»</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-shopping"/> è´­ç‰©</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-sns"/> ç¤¾äº¤ç½‘ç»œ</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-tools"/> å·¥å…·</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-url_shorter"/> çŸ­é“¾æ¥</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-video"/> è§†é¢‘åˆ†äº«</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-enhance-url_shorter"/> å…¶ä»–</label>
        							</div>
        						</div>
        					</div>
        					<h3>å»å¹¿å‘Šè§„åˆ™</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-ad_company"/> å¹¿å‘Šå…¬å¸</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-analysis"/> ç»Ÿè®¡å…¬å¸</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-movie"/> ç”µå½±ç½‘ç«™</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-shopping"/> è´­ç‰©ç½‘ç«™</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-sns"/> ç¤¾äº¤ç½‘ç«™</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-tool"/> å·¥å…·ç½‘ç«™</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="domain-adblock-video"/> è§†é¢‘ç½‘ç«™</label>
        							</div>
        						</div>
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label class="text-danger"><input type="checkbox" name="domain-adblock-aggressive" advanced="advanced" data-on-color="danger" data-off-color="success"/> æ¿€è¿›è§„åˆ™</label>
        							</div>
        						</div>
        					</div>
        					<h2>åŸºäº IP çš„è§„åˆ™</h2>
        					<h3>å¢å¼ºè§„åˆ™</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="ip-enhance-telegram"/> Telegram</label>
        							</div>
        						</div>
        					</div>
        					<h3>å»å¹¿å‘Šè§„åˆ™</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
                                    æš‚æ— 
        						</div>
        					</div>
        					<h2>å…¶ä»–è§„åˆ™</h2>
        					<h3>Hosts</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
                                    æš‚æ— 
        						</div>
        					</div>
        					<h3>URLé‡å†™</h3>
        					<div class="row">
        						<div class="col-sm-3 col-xs-6">
        							<div class="checkbox">
        								<label><input type="checkbox" name="other-rewrite-qq"/> QQ</label>
        							</div>
        						</div>
        					</div>
        				</div>
                        <div class="section">
        					<h1 class="page-header"><span class="glyphicon glyphicon-download-alt"></span> å…¶ä»–é€‰é¡¹</h1>
                            <h3>è§„åˆ™æ‰˜ç®¡</h3>
        					<div class="row">
                                <div class="col-sm-12">
        							<div class="checkbox">
        								<label><input type="checkbox" name="config-managed" advanced="advanced" data-on-color="success" data-off-color="success"/> ç”Ÿæˆæ‰˜ç®¡çš„è§„åˆ™ <span class="text-danger">ã€ æ‰˜ç®¡çš„è§„åˆ™å¯ä»¥è‡ªåŠ¨æ›´æ–°ï¼Œä½†æ˜¯ä¸å¯æ‰‹å·¥ç¼–è¾‘ ã€‘</span></label>
        							</div>
        						</div>
        					</div>
        				</div>
        				<div class="section">
        					<h1 class="page-header"><span class="glyphicon glyphicon-download-alt"></span> ä¸‹è½½</h1>
        					<p class="lead">
        						åº†ç¥ä¸€ä¸‹ï¼ä½ çš„å®šåˆ¶ç‰ˆ Surge è§„åˆ™å³å°†å¤§åŠŸå‘Šæˆã€‚åªè¦ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å°±å¯ä»¥ä¸‹è½½äº†ã€‚
        					</p>
        					<button id="doit" class="btn btn-primary btn-block btn-lg">ä¸‹è½½</button>
        				</div>
        			</form>
        		</div>
            </div>
            <div role="tabpanel" class="tab-pane" id="settings">
                <div class="col-sm-12">
                    <div id="config-parse-result-success" class="alert alert-success" role="alert">
                        <h4><span class="glyphicon glyphicon-ok"></span> æˆåŠŸ</h4>è¯·åˆ‡æ¢åˆ°å·¦è¾¹â€œå®šåˆ¶è§„åˆ™â€ç»§ç»­å®šåˆ¶ï¼
                    </div>
                    <div id="config-parse-result-error" class="alert alert-danger" role="alert">
                        <h4><span class="glyphicon glyphicon-alert"></span> æœ‰é”™è¯¯</h4>æ­¤é…ç½®ä»£ç æœ‰é”™è¯¯ï¼Œæ”¾å¼ƒå§ï¼
                    </div>
                    <form>
        				<div class="section">
        					<h1 class="page-header"><span class="glyphicon glyphicon-equalizer"></span> å®šåˆ¶ä»£ç </h1>
                            <p>å®šåˆ¶ä»£ç æ˜¯è§„åˆ™æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ<code>#!MANAGED-CONFIG ..........</code></p>
                            <p>å®šåˆ¶ä»£ç ä¸­è®°å½•äº†ä¸Šä¸€æ¬¡å®šåˆ¶çš„å„ç§é€‰é¡¹ï¼Œå¯ä»¥ç®€åŒ–æ‚¨çš„å®šåˆ¶è¿‡ç¨‹ã€‚å¦‚æœæ‚¨æœ‰å®šåˆ¶ä»£ç ï¼Œè¯·åœ¨ä¸‹æ–¹è¾“å…¥ã€‚</p>
        					<div class="row">
        						<div class="col-sm-12">
        							<div class="form-group">
        								<textarea id="customize_code" class="form-control" rows="5"></textarea>
        							</div>
        						</div>
        					</div>
                            <button id="parseit" class="btn btn-primary btn-block btn-lg">è§£æå®šåˆ¶ä»£ç </button>
        				</div>
                    </form>
                </div>
            </div>
        </div>
	</div>
</div>
<!-- æ¨¡æ€æ¡† -->
<div class="modal fade" id="node_info_example_model" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">èŠ‚ç‚¹é…ç½®ç¤ºä¾‹</h4>
			</div>
			<div class="modal-body">
				<h4>é…ç½®ç¤ºä¾‹</h4>
				<pre>
[Proxy]
ğŸ’Š Direct = direct
ğŸŒ 1 = custom,1.2.3.4,443,aes-256-cfb,password,https://github.com/jinyu121/SurgeRule/raw/master/SSEncrypt.module, ota=true
ğŸŒ 2 = custom,1.2.3.4,443,aes-256-cfb,password,https://github.com/jinyu121/SurgeRule/raw/master/SSEncrypt.module, ota=true
ğŸŒš 1 = custom,1.2.3.4,443,aes-256-cfb,password,https://github.com/jinyu121/SurgeRule/raw/master/SSEncrypt.module, ota=true
ğŸŒš 2 = custom,1.2.3.4,443,aes-256-cfb,password,https://github.com/jinyu121/SurgeRule/raw/master/SSEncrypt.module, ota=true
[Proxy Group]
ğŸš€ Proxy = select, ğŸ’Š Direct, ğŸŒ Auto, ğŸŒš Auto, âš– Select
ğŸŒ Proxy = select, ğŸ’Š Direct, ğŸš€ Proxy
ğŸ‡¨ğŸ‡³ Proxy = select, ğŸ’Š Direct, ğŸš€ Proxy
ğŸ Proxy = select, ğŸ’Š Direct, ğŸš€ Proxy
ğŸŒ Auto = url-test, ğŸŒ 1, ğŸŒ 2, url = http://www.gstatic.com/generate_204
ğŸŒš Auto = url-test, ğŸŒš 1, ğŸŒš 2, url = http://www.gstatic.com/generate_204
âš– Select = select, ğŸŒ 1, ğŸŒ 2, ğŸŒš 1, ğŸŒš 2
				</pre>
				<h4>é…ç½®è¯´æ˜</h4>
				<div class="row">
					<div class="col-sm-6">
						<p>
							åœ¨<code>[Proxy]</code>ä¸­ï¼Œ<b>å»ºè®®</b>ä¿ç•™å¦‚ä¸‹ Proxy ï¼š
						</p>
						<dl class="dl-horizontal">
							<dt><code>ğŸ’Š Direct = direct</code></dt>
							<dd>ç›´è¿è§„åˆ™</dd>
						</dl>
					</div>
					<div class="col-sm-6">
						<p>
							åœ¨<code>[Proxy Group]</code>ä¸­ï¼Œ<b>å¿…é¡»</b>ä¿ç•™å¦‚ä¸‹ Group ï¼š
						</p>
						<dl class="dl-horizontal">
							<dt><code>ğŸš€ Proxy</code></dt>
							<dd>ä¸€èˆ¬ä»£ç†</dd>
							<dt><code>ğŸŒ Proxy</code></dt>
							<dd>å…œåº•å…¨å±€ä»£ç†</dd>
							<dt><code>ğŸ‡¨ğŸ‡³ Proxy</code></dt>
							<dd>å›½å†…ç½‘ç«™è®¿é—®è§„åˆ™</dd>
							<dt><code>ğŸ Proxy</code></dt>
							<dd>è‹¹æœæœåŠ¡ä¸“ç”¨è§„åˆ™</dd>
						</dl>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">å…³é—­</button>
				<p class="pull-left hidden-xs">
					æ›´è¯¦çš„ç»†é…ç½®è¯´æ˜ï¼Œè¯·å‚é˜…å®˜æ–¹è‹±æ–‡ç‰ˆ<a href="https://www.gitbook.com/book/blankwonder/surge-manual" target="_blank">ã€Š Surge ä½¿ç”¨æ‰‹å†Œ ã€‹</a>
				</p>
			</div>
		</div>
	</div>
</div>
<a href="https://github.com/jinyu121/SurgeRule">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
</a>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-json/2.6.0/jquery.json.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap-switch/3.3.2/js/bootstrap-switch.min.js"></script>
<script src="js/base64.min.js"></script>
<script>
$(function(){
    // è§„åˆ™ç”Ÿæˆå’Œä¸‹è½½
    function make_rule(){
        cfg={
            "config":{
                "managed":true,
                "node":[],
                "category":[
                    "domain",
                    "ip",
                    "other"
                ]
            },
            "domain":{
                "enhance":[],
                "adblock":[]
            },
            "ip":{
                "enhance":[],
                "adblock":[]
            },
            "other": {
                "hosts": [],
                "rewrite": []
            }
        }
        // è¯»å–èŠ‚ç‚¹ä¿¡æ¯
        cfg.config.node=$("#node_info").val().split("\n");
        // è¯»å–é…ç½®ä¿¡æ¯
        cfg.config.category.forEach(function(category){
            Object.keys(cfg[category]).forEach(function(rule_set){
                obj = $(":checkbox:checked[name ^= "+ category+"-"+rule_set +"]");
                obj.each(function(ith){
                    name = obj[ith].name.replace(category+"-"+rule_set+"-","");
                    cfg[category][rule_set].push(name);
                })
            });
        });
        // è¯»å–å…¶ä»–ä¿¡æ¯
        cfg.config.managed=$(":checkbox[name = 'config-managed']").prop("checked");
        // ç¼–ç 
        cfg_b64 = Base64.encode($.toJSON(cfg));
        $("#customize_code").val(cfg_b64);
        // ä¸‹è½½
        open("Customize.php/?conf="+cfg_b64);
        return false;
    };
    // è§„åˆ™è§£æ
    function parse_rule(){
        // è¯»å–
        cfg_b64 = $("#customize_code").val();
        str_conf_pos = cfg_b64.indexOf("?conf=");
        if (str_conf_pos != -1){
            cfg_b64 = cfg_b64.substring(str_conf_pos + 6);
        }
        // è§£æ
        try{
            // è§£ç 
            cfg = $.parseJSON(Base64.decode(cfg_b64));
            // è§£æèŠ‚ç‚¹ä¿¡æ¯
            $("#node_info").val(cfg.config.node.join("\n"));
            // è§£æè§„åˆ™é€‰å–
            // åˆå§‹åŒ–ï¼šå…¨éƒ¨ä¸é€‰ä¸­
            $(":checkbox").attr("checked", false);
            cfg.config.category.forEach(function(category){
                Object.keys(cfg[category]).forEach(function(rule_set){
                    cfg[category][rule_set].forEach(function(rule_name){
                        checkbox_name = category+"-"+rule_set +"-"+rule_name;
                        $(":checkbox[name = '"+checkbox_name+"']").prop("checked", true);
                    });
                });
            });
            // å…¶ä»–é…ç½®
            $(":checkbox[name = 'config-managed']").prop("checked",cfg.config.managed);
            // æ˜¾ç¤ºé€»è¾‘
            $(":checkbox").bootstrapSwitch("destroy");
            $(":checkbox").bootstrapSwitch({size:'mini'});
            $("#config-parse-result-success").slideDown().slideUp(1500);
            $("#main_tab a[href='#home']").tab('show');
        }catch(e){
            $("#config-parse-result-error").slideDown().slideUp(2000);
        }
        return false;
    }

    // åˆå§‹åŒ–ï¼šå…¨éƒ¨é€‰ä¸­
    $(":checkbox").prop("checked", true);
    // åˆå§‹åŒ–ï¼šæ’é™¤æ¿€è¿›è§„åˆ™
    $(":checkbox[advanced]").prop("checked", false);
    $("#config-parse-result-success").hide();
    $("#config-parse-result-error").hide();
    // æ˜¾ç¤º
    $(":checkbox").bootstrapSwitch({size:'mini'});
    // æäº¤äº‹ä»¶
    $("#doit").click(make_rule);
    // æäº¤äº‹ä»¶
    $("#parseit").click(parse_rule);
});
</script>
</body>
</html>
